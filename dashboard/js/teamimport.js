(()=>{"use strict";var e,n={7848:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(9601),o=t.n(r),a=t(2609),l=t.n(a)()(o());l.push([e.id,".error-message{min-width:236px;max-width:272px}",""]);const s=l},5445:(e,n,t)=>{t(4467);var r=t(4825),o=t(9850),a=t.n(o),l=t(9745);const s=[nodecg.Replicant("teamStore")],i=(0,l.Q_)("teams",{state:()=>({teamStore:null})});var c=t(8447);const u=(0,l.Q_)("errorHandler",{state:()=>({recentErrors:{}}),actions:{removeRecentError({key:e}){delete this.recentErrors[e]},handleError({err:e,info:n}){if(console.error(`Got error from '${n}': \n`,e),Object.keys(this.recentErrors).length>=2)return;const t=(0,c.O)();this.recentErrors[t]=e,window.setTimeout((()=>{delete this.recentErrors[t]}),25e3)}}});var d=t(7875);const p=(0,d.Uk)(" Importing teams erases manual changes made to player data. "),f=(0,d._)("br",null,null,-1),m=(0,d.Uk)(" Manually inserted teams will be preserved. ");var v=t(641),h=t(8127),g=t(349);const y={key:0,class:"layout vertical center-horizontal m-b-8"},w={class:"max-width"};function b(e,n=48){return e&&e.length>n?e.substring(0,n-"...".length)+"...":e}const E=(0,d.aZ)({name:"ErrorLog",components:{IplMessage:h.IplMessage},setup(){const e=u();if(!e)throw new Error("Missing error handler store.");return{recentErrors:(0,v.Fl)((()=>e.recentErrors)),removeMessage(n){e.removeRecentError({key:n})},addDots:b}}});var k=t(6062),I=t.n(k),O=t(4036),x=t.n(O),j=t(6793),M=t.n(j),_=t(7892),P=t.n(_),S=t(1173),U=t.n(S),Z=t(2464),C=t.n(Z),T=t(7848),D={};D.styleTagTransform=C(),D.setAttributes=P(),D.insert=M().bind(null,"head"),D.domAPI=x(),D.insertStyleElement=U(),I()(T.Z,D),T.Z&&T.Z.locals&&T.Z.locals;var V=t(4407);const W=(0,V.Z)(E,[["render",function(e,n,t,r,o,a){const l=(0,d.up)("ipl-message");return Object.keys(e.recentErrors).length>0?((0,d.wg)(),(0,d.iD)("div",y,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(e.recentErrors,((n,t,r)=>((0,d.wg)(),(0,d.j4)(l,{key:t,type:"error",closeable:"",class:(0,g.C_)(["error-message",{"m-t-8":r>0}]),"data-test":`recent-error-${t}`,onClose:n=>e.removeMessage(t)},{default:(0,d.w5)((()=>{var t;return[(0,d._)("div",w,(0,g.zw)(e.addDots(null!==(t=n.message)&&void 0!==t?t:n,256)),1)]})),_:2},1032,["class","data-test","onClose"])))),128))])):(0,d.kq)("",!0)}]]);const H=(0,d.aZ)({name:"TeamImportPanel",components:{IplMessage:h.IplMessage,ErrorLog:W,IplButton:h.IplButton,IplInput:h.IplInput,IplSpace:h.IplSpace},setup(){const e=(0,v.iH)("https://stratus.network/tm/teams.json"),n={dataUrl:(0,h.validator)(e,!0,h.notBlank)};return(0,h.provideValidators)(n),{importUrl:e,allValid:(0,v.Fl)((()=>(0,h.allValid)(n))),onImport(){return n=this,t=void 0,o=function*(){return function(e,n){return t=this,r=void 0,a=function*(){return nodecg.sendMessage("teams:import",n)},new((o=void 0)||(o=Promise))((function(e,n){function l(e){try{i(a.next(e))}catch(e){n(e)}}function s(e){try{i(a.throw(e))}catch(e){n(e)}}function i(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(l,s)}i((a=a.apply(t,r||[])).next())}));var t,r,o,a}(0,{url:e.value})},new((r=void 0)||(r=Promise))((function(e,a){function l(e){try{i(o.next(e))}catch(e){a(e)}}function s(e){try{i(o.throw(e))}catch(e){a(e)}}function i(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,s)}i((o=o.apply(n,t||[])).next())}));var n,t,r,o}}}}),R=(0,V.Z)(H,[["render",function(e,n,t,r,o,a){const l=(0,d.up)("error-log"),s=(0,d.up)("ipl-message"),i=(0,d.up)("ipl-input"),c=(0,d.up)("ipl-button"),u=(0,d.up)("ipl-space");return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.Wm)(l),(0,d.Wm)(s,{type:"info"},{default:(0,d.w5)((()=>[p,f,m])),_:1}),(0,d.Wm)(u,{class:"m-t-8"},{default:(0,d.w5)((()=>[(0,d.Wm)(i,{modelValue:e.importUrl,"onUpdate:modelValue":n[0]||(n[0]=n=>e.importUrl=n),label:"Data URL",name:"dataUrl"},null,8,["modelValue"]),(0,d.Wm)(c,{disabled:!e.allValid,label:"Import",class:"m-t-8",async:"",onClick:e.onImport},null,8,["disabled","onClick"])])),_:1})],64)}]]);var B,F;F=function*(){const e=(0,r.ri)(R);e.use((0,l.WB)()),yield function(e,n){return t=this,r=void 0,l=function*(){e.forEach((e=>{e.on("change",(t=>{n.$patch((n=>{n[e.name]=a()(t)}))}))})),yield NodeCG.waitForReplicants(...Object.values(e))},new((o=void 0)||(o=Promise))((function(e,n){function a(e){try{i(l.next(e))}catch(e){n(e)}}function s(e){try{i(l.throw(e))}catch(e){n(e)}}function i(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}i((l=l.apply(t,r||[])).next())}));var t,r,o,l}(s,i()),function(e){const n=u();e.config.errorHandler=(e,t,r)=>{n.handleError({err:e,info:r})}}(e),e.mount("#app")},new((B=void 0)||(B=Promise))((function(e,n){function t(e){try{o(F.next(e))}catch(e){n(e)}}function r(e){try{o(F.throw(e))}catch(e){n(e)}}function o(n){var o;n.done?e(n.value):(o=n.value,o instanceof B?o:new B((function(e){e(o)}))).then(t,r)}o((F=F.apply(void 0,[])).next())}))}},t={};function r(e){var o=t[e];if(void 0!==o)return o.exports;var a=t[e]={id:e,loaded:!1,exports:{}};return n[e].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=n,r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},e=[],r.O=(n,t,o,a)=>{if(!t){var l=1/0;for(u=0;u<e.length;u++){for(var[t,o,a]=e[u],s=!0,i=0;i<t.length;i++)(!1&a||l>=a)&&Object.keys(r.O).every((e=>r.O[e](t[i])))?t.splice(i--,1):(s=!1,a<l&&(l=a));if(s){e.splice(u--,1);var c=o();void 0!==c&&(n=c)}}return n}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[t,o,a]},r.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return r.d(n,{a:n}),n},r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={324:0};r.O.j=n=>0===e[n];var n=(n,t)=>{var o,a,[l,s,i]=t,c=0;if(l.some((n=>0!==e[n]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(i)var u=i(r)}for(n&&n(t);c<l.length;c++)a=l[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},t=self.webpackChunk=self.webpackChunk||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})(),r.nc=void 0;var o=r.O(void 0,[519,745],(()=>r(5445)));o=r.O(o)})();